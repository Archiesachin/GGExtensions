function calculateMoonPhase(date){var lunarDays=29.53058770576;var new2000=new Date("2000-01-06T18:14:00Z").getTime()/1e3;var unixDate=date.getTime()/1e3;var totalSecs=unixDate-new2000;var lunarSecs=lunarDays*(24*60*60);var currentSecs=totalSecs%lunarSecs;if(currentSecs<0){currentSecs+=lunarSecs}var currentFrac=currentSecs/lunarSecs;var currentDays=currentFrac*lunarDays;var phasePercentage=currentDays/lunarDays*100;var phases=[["New Moon",0,1],["Waxing Crescent",1,6.38264692644],["First Quarter",6.38264692644,8.38264692644],["Waxing Gibbous",8.38264692644,13.76529385288],["Full Moon",13.76529385288,15.76529385288],["Waning Gibbous",15.76529385288,21.14794077932],["Last Quarter",21.14794077932,23.14794077932],["Waning Crescent",23.14794077932,28.53058770576],["New Moon",28.53058770576,29.53058770576]];var thePhase;for(var i=0;i<phases.length;i++){if(currentDays>=phases[i][1]&&currentDays<=phases[i][2]){thePhase=phases[i][0];break}}var nextNewMoonDate=new Date(date);nextNewMoonDate.setDate(nextNewMoonDate.getDate()+(29.53-currentDays));return{phase:thePhase,percentage:phasePercentage.toFixed(2),nextNewMoon:nextNewMoonDate.toDateString()}}function icon(phase){if(phase==="New Moon"){return"assets/new-moon.png"}else if(phase==="Waxing Crescent"){return"assets/waxing-cresent.png"}else if(phase==="First Quarter"){return"assets/first-quarter.png"}else if(phase==="Waxing Gibbous"){return"assets/waxing-gibbous.png"}else if(phase==="Full Moon"){return"assets/full-moon.png"}else if(phase==="Waning Gibbous"){return"assets/waning-gibbous.png"}else if(phase==="Last Quarter"){return"assets/last-quarter.png"}else if(phase==="Waning Crescent"){return"assets/waning-crescent.png"}}function updateMoonPhaseDisplay(){var currentDate=new Date;var moonInfo=calculateMoonPhase(currentDate);var phase=moonInfo.phase;var displayDate="Date: "+currentDate.toDateString();var moonPhaseNameDisplay="Moon Phase: "+phase;var moonPhaseImgDisplay=icon(phase);var moonPhasePercentageDisplay="Percentage of Lunation: "+moonInfo.percentage+"%";var moonPhaseNextDisplay="Next New Moon: "+moonInfo.nextNewMoon;document.getElementById("date").innerHTML=displayDate;document.getElementById("moon-phase-name").innerHTML=moonPhaseNameDisplay;document.getElementById("moon-phase-img").src=moonPhaseImgDisplay;document.getElementById("moon-phase-percentage").innerHTML=moonPhasePercentageDisplay;document.getElementById("moon-phase-next").innerHTML=moonPhaseNextDisplay}updateMoonPhaseDisplay();const targetHour=0;const targetMinute=0;function checkTime(){const now=new Date;const currentHour=now.getHours();const currentMinute=now.getMinutes();if(currentHour===targetHour&&currentMinute===targetMinute){updateMoonPhaseDisplay()}}setInterval(checkTime,6*1e4);const themeChangeBtn=document.getElementById("change-theme");const theme=document.getElementById("theme");const body=document.getElementById("body");const heading=document.getElementById("heading");const moonPhase=document.getElementById("moon-phase");let darkMode=true;theme.addEventListener("click",function(){if(darkMode){themeChangeBtn.classList.remove("fa-moon");themeChangeBtn.classList.add("fa-sun");darkMode=false;themeChangeBtn.style.color="rgb(13, 12, 12)";body.style.backgroundColor="#fff";heading.style.color="rgb(13, 12, 12)";moonPhase.style.color="rgb(13, 12, 12)";moonPhase.style.backgroundColor="#fff"}else{darkMode=true;body.style.backgroundColor="rgb(13, 12, 12)";themeChangeBtn.style.color="#fff";themeChangeBtn.classList.remove("fa-sun-bright");themeChangeBtn.classList.add("fa-moon");heading.style.color="#fff";moonPhase.style.color="#fff";moonPhase.style.backgroundColor="rgb(13, 12, 12)"}});